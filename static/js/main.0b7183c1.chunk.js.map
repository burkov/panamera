{"version":3,"sources":["components/main-page/params-table.module.css","components/loading/loading.module.css","components/creds-prompt/creds-prompt.module.css","components/link-button/link-button.module.css","components/error-div/error-div.module.css","components/page/page.module.css","components/link-button/index.tsx","components/error-div/index.tsx","common/helpers.ts","components/creds-prompt/import-aws-creds.tsx","core/use-local-storage.ts","core/use-aws-credentials.ts","components/creds-prompt/index.tsx","components/route-with-credentials/index.tsx","images/panamera-logo.png","components/page/index.tsx","components/main-page/missing-value-cell.tsx","components/main-page/single-value-cell.tsx","components/main-page/multi-value-cell.tsx","components/main-page/table.tsx","core/env-prefixes.ts","core/refresh-params.tsx","components/loading/index.tsx","components/main-page/index.tsx","core/use-aws-parameters-storage.ts","components/app/index.tsx","index.tsx"],"names":["module","exports","LinkButton","children","rest","className","cn","styles","linkButton","ErrorDiv","error","errorDiv","message","maskKey","key","split","map","e","i","length","join","tryCatch","block","catchBlock","r","Promise","catch","readFile","a","window","showOpenFilePicker","multiple","credentialsFileHandler","getFile","credentialsFile","name","Error","ini","text","result","parse","schema","yup","shape","aws_access_key_id","required","aws_secret_access_key","Object","entries","filter","v","isValidSync","entryName","accessKey","secretKey","ImportAwsCredentials","onCredentialsSelected","useState","setError","credentials","setCredentials","useEffect","onImportClick","undefined","size","onClick","getItemSafeSync","value","localStorage","getItem","JSON","console","removeItem","fetcher","useLocalStorage","useSWR","initialData","data","mutate","setValue","newValue","setItem","stringify","removeValue","useAwsCredentials","removeCredentials","CredentialsPage","history","useHistory","location","useLocation","returnTo","state","from","push","span","verticalLine","RouteWithCredentials","to","pathname","PageTemplate","branch","commit","date","shortHash","pageContainer","contentWrapper","alignItems","src","Logo","width","alt","logo","footer","dayjs","fromNow","MissingValueCell","missingValueCell","menuId","SingleValueCell","Value","parameter","colorClassMap","show","useContextMenu","id","onContextMenu","event","preventDefault","props","valueCell","get","truncate","SingleValueCellMenu","animation","clipboardy","copyValueMenuIcon","MultiValueCell","parameters","Set","Prefix","prefix","slice","lastIndexOf","replace","prefixes","n","s","colorClasses","consistent0","consistent1","consistent2","consistent3","consistent4","consistent5","consistent6","consistent7","consistent8","PrefixRow","paramsForName","colorClassByValue","Map","_","countBy","forGivenPrefix","Name","includes","isValueMissing","isSingleValue","ParametersTable","params","search","setSearch","sortedParams","useMemo","forEach","p","old","set","Array","sort","fused","trim","item","matches","refIndex","Fuse","keys","includeMatches","minMatchCharLength","includeScore","score","placeholder","onChange","target","paramsTable","nameTh","envTh","list","searchWords","flatMap","indices","tuple","parts","prevNameParts","partsToShow","partsToHide","shift","prefixTd","textToHighlight","hiddenPrefix","envPrefixes","tomcat","lservice","allapps","progressLine","page","total","prevTotal","prefixAndTotal","percent","Math","ceil","refreshParams","onError","onProgress","onReady","ssm","AWS","SSM","region","Credentials","flatPrefixes","allPrefixes","resolve","getParametersByPath","Path","Recursive","WithDecryption","eachPage","err","doneCallback","Parameters","Loading","title","justify","direction","logoContainer","MainPage","loading","setLoading","errors","setErrors","fetchedAt","once","setOnce","onRefreshClicked","Date","mode","disabled","App","path","exact","extend","relativeTime","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.0b7183c1.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"allTheSameRow\":\"params-table_allTheSameRow__2SPTF\",\"highlightedPrefix\":\"params-table_highlightedPrefix__13cxh\",\"hiddenPrefix\":\"params-table_hiddenPrefix__2uLo9\",\"prefixTd\":\"params-table_prefixTd__hqVf9\",\"paramsTable\":\"params-table_paramsTable__sEcuf\",\"missingValueCell\":\"params-table_missingValueCell__3FAgM\",\"nameTh\":\"params-table_nameTh__2elJw\",\"envTh\":\"params-table_envTh__20z_z\",\"valueCell\":\"params-table_valueCell__3uKF-\",\"consistent0\":\"params-table_consistent0__nk44Y\",\"consistent1\":\"params-table_consistent1__3Z1kP\",\"consistent2\":\"params-table_consistent2__3wpqd\",\"consistent3\":\"params-table_consistent3__2BjrA\",\"consistent4\":\"params-table_consistent4__3gna6\",\"consistent5\":\"params-table_consistent5__qe5XP\",\"consistent6\":\"params-table_consistent6__1dqVQ\",\"consistent7\":\"params-table_consistent7__nSmXD\",\"consistent8\":\"params-table_consistent8__3hWSc\",\"copyValueMenuIcon\":\"params-table_copyValueMenuIcon__1PEoo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"logoContainer\":\"loading_logoContainer__10WD-\",\"logo\":\"loading_logo__f_02B\",\"rotate\":\"loading_rotate__1s8fQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"verticalLine\":\"creds-prompt_verticalLine__Tx2pu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"linkButton\":\"link-button_linkButton__2xyCc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"errorDiv\":\"error-div_errorDiv__1C-Yp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wideDiv\":\"page_wideDiv__2inSG\",\"logo\":\"page_logo__l_sIn\",\"pageContainer\":\"page_pageContainer__sagIe\",\"contentWrapper\":\"page_contentWrapper__3aSSW\",\"footer\":\"page_footer__3hx7W\",\"branch\":\"page_branch__1t1gv\"};","import React, { FC } from 'react';\nimport cn from 'classnames';\nimport styles from './link-button.module.css';\n\nexport const LinkButton: FC<React.ButtonHTMLAttributes<any>> = ({ children, ...rest }) => {\n  return (\n    <button {...rest} className={cn('wt-link', styles.linkButton)}>\n      {children}\n    </button>\n  );\n};\n","import React, { FC } from 'react';\nimport styles from './error-div.module.css';\nimport cn from 'classnames';\n\nexport const ErrorDiv: FC<React.HTMLAttributes<HTMLDivElement> & { error?: Error }> = ({ className, error }) => {\n  if (!error) return null;\n  return <div className={cn(styles.errorDiv, 'wt-text-2', className)}>Error: {error.message}</div>;\n};\n","export const maskKey = (key: string): string => {\n  return key\n    .split('')\n    .map((e, i) => (i < 6 || i > key.length - 4 ? e : '*'))\n    .join('');\n};\n\nexport const tryCatch = (block: () => void | Promise<void>, catchBlock: (e: Error) => void) => {\n  try {\n    const r = block();\n    if (r instanceof Promise) {\n      r.catch(catchBlock);\n    }\n  } catch (e) {\n    catchBlock(e);\n  }\n};\n","import React, { FC, SyntheticEvent, useEffect, useState } from 'react';\nimport { LinkButton } from '../link-button';\nimport { ErrorDiv } from '../error-div';\nimport ini from 'ini';\nimport * as yup from 'yup';\nimport { AwsCredentials } from '../../core/use-aws-credentials';\nimport { List, ListItem } from '@webteam/list';\nimport { maskKey, tryCatch } from '../../common/helpers';\n\ndeclare global {\n  interface Window {\n    showOpenFilePicker: any;\n  }\n}\n\ntype CredentialsFileEntry = {\n  aws_access_key_id: string;\n  aws_secret_access_key: string;\n};\n\ntype NamedAwsCredentials = [string, AwsCredentials];\n\nconst readFile = async (): Promise<NamedAwsCredentials[]> => {\n  const [credentialsFileHandler] = await window.showOpenFilePicker({\n    multiple: false,\n  });\n  const credentialsFile: File = await credentialsFileHandler.getFile();\n  if (credentialsFile.name !== 'credentials') throw new Error(\"File should be named 'credentials'\");\n  const result = ini.parse(await credentialsFile.text());\n  const schema = yup.object().shape({\n    aws_access_key_id: yup.string().required(),\n    aws_secret_access_key: yup.string().required(),\n  });\n  return Object.entries(result)\n    .filter(([, v]) => schema.isValidSync(v))\n    .map(([entryName, { aws_access_key_id, aws_secret_access_key }]: [string, CredentialsFileEntry]) => [\n      entryName,\n      {\n        accessKey: aws_access_key_id,\n        secretKey: aws_secret_access_key,\n      },\n    ]);\n};\n\nexport const ImportAwsCredentials: FC<{ onCredentialsSelected: (credentials: AwsCredentials) => void }> = ({ onCredentialsSelected }) => {\n  const [error, setError] = useState<Error>();\n  const [credentials, setCredentials] = useState<NamedAwsCredentials[]>();\n  useEffect(() => {\n    if (credentials && credentials.length === 1) onCredentialsSelected(credentials[0][1]);\n  }, [credentials, onCredentialsSelected]);\n\n  const onImportClick = async () => {\n    setError(undefined);\n    tryCatch(async () => setCredentials(await readFile()), setError);\n  };\n\n  if (credentials)\n    return (\n      <>\n        <h4 className=\"wt-h4\">Select profile to use:</h4>\n        <div className=\"wt-offset-top-12\" />\n        <List size=\"xs\">\n          {credentials.map(([name, credentials]) => (\n            <ListItem key={name} onClick={() => onCredentialsSelected(credentials)}>\n              {name} ({maskKey(credentials.accessKey)})\n            </ListItem>\n          ))}\n        </List>\n      </>\n    );\n  return (\n    <>\n      <div className=\"wt-text-2\">\n        <LinkButton onClick={onImportClick}>Import</LinkButton> credentials from <strong>~/.aws/credentials</strong>\n        <ErrorDiv className=\"wt-offset-top-12\" error={error} />\n      </div>\n    </>\n  );\n};\n","import useSWR from 'swr/esm';\n\nconst getItemSafeSync = <T>(key: string): T | undefined => {\n  try {\n    const value = localStorage.getItem(key);\n    return value === null ? undefined : JSON.parse(value);\n  } catch (e) {\n    console.error('Failed to read value from local storage', e);\n    localStorage.removeItem(key);\n    return undefined;\n  }\n};\n\nconst fetcher = async (key: string): Promise<any> => getItemSafeSync(key);\n\nexport interface LocalStorageValue<T> {\n  value: T | undefined;\n  setValue: (newValue: T) => void;\n  removeValue: () => void;\n}\n\nexport const useLocalStorage = <T>(key: string): LocalStorageValue<T> => {\n  const { data, mutate } = useSWR<T>(key, fetcher, {\n    initialData: getItemSafeSync(key),\n  });\n  const setValue = (newValue: T) => {\n    localStorage.setItem(key, JSON.stringify(newValue));\n    mutate(newValue).catch(console.error);\n  };\n  const removeValue = () => {\n    localStorage.removeItem(key);\n    mutate(undefined).catch(console.error);\n  };\n  return { value: data, setValue, removeValue };\n};\n","import { useLocalStorage } from './use-local-storage';\n\nexport interface AwsCredentials {\n  accessKey: string;\n  secretKey: string;\n}\n\nexport const useAwsCredentials = () => {\n  const { value, setValue, removeValue } = useLocalStorage<AwsCredentials>('aws-credentials');\n  return { credentials: value, setCredentials: setValue, removeCredentials: removeValue };\n};\n","import React, { FC, useEffect } from 'react';\nimport { Col, Row } from '@webteam/layout';\nimport styles from './creds-prompt.module.css';\nimport { ImportAwsCredentials } from './import-aws-creds';\nimport { AwsCredentials, useAwsCredentials } from '../../core/use-aws-credentials';\nimport { useHistory, useLocation } from 'react-router-dom';\n\nexport const CredentialsPage: FC<{}> = () => {\n  const { credentials, setCredentials } = useAwsCredentials();\n  const history = useHistory();\n  const location = useLocation() as any;\n  const returnTo = location?.state?.from ?? '/';\n  const onCredentialsSelected = (value: AwsCredentials) => {\n    setCredentials(value);\n    history.push(returnTo);\n  };\n  useEffect(() => {\n    if (credentials !== undefined) history.push(returnTo);\n  }, [credentials, history, returnTo]);\n  return (\n    <Row size=\"0\">\n      <Col span={4}>\n        <ImportAwsCredentials onCredentialsSelected={onCredentialsSelected} />\n        {/*<CredentialsManualInput />*/}\n      </Col>\n      <Col span=\"inline\">\n        <div className={styles.verticalLine} />\n      </Col>\n      <Col span=\"inline\">\n        <ul className=\"wt-ul\">\n          <li>Keys will be used for read-only operations</li>\n          <li>Keys will be stored in browser local storage</li>\n          <li>Keys will be used only from this webapp, they are not transferred anywhere</li>\n          <li>You can remove them anytime you want later by clicking 'Sign out' link</li>\n        </ul>\n      </Col>\n    </Row>\n  );\n};\n","import React, { FC } from 'react';\nimport { Redirect, Route, RouteProps } from 'react-router-dom';\nimport { useAwsCredentials } from '../../core/use-aws-credentials';\n\nexport const RouteWithCredentials: FC<RouteProps> = ({ children, ...rest }) => {\n  const { credentials } = useAwsCredentials();\n  return (\n    <Route {...rest}>\n      {({ location }) => {\n        if (credentials === undefined) {\n          return <Redirect to={{ pathname: '/credentials', state: { from: location } }} />;\n        }\n        return children;\n      }}\n    </Route>\n  );\n};\n","export default __webpack_public_path__ + \"static/media/panamera-logo.0e64dd04.png\";","import React, { FC } from 'react';\nimport { Col, Hr, LayoutContent, LayoutFooter, LayoutHeader, Row } from '@webteam/layout';\nimport GitInfo from 'react-git-info/macro';\nimport dayjs from 'dayjs';\nimport styles from './page.module.css';\nimport Logo from '../../images/panamera-logo.png';\n\nexport const PageTemplate: FC = ({ children }) => {\n  const {\n    branch,\n    commit: { date, shortHash, message },\n  } = GitInfo();\n  return (\n    <div className={styles.pageContainer}>\n      <div className={styles.contentWrapper}>\n        <LayoutHeader>\n          <Row size=\"s\" alignItems=\"center\">\n            <Col span=\"inline\">\n              <img src={Logo} width={32} alt=\"Logo\" className={styles.logo} />\n            </Col>\n            <Col span=\"inline\">\n              <h1 className=\"wt-h1\">Panamera: parameters naming errors resolution assistant</h1>\n            </Col>\n          </Row>\n        </LayoutHeader>\n        <LayoutContent className=\"wt-offset-top-24\">{children}</LayoutContent>\n      </div>\n      <LayoutFooter className={styles.footer}>\n        <Hr />\n        <p className=\"wt-text-3\">\n          {shortHash} | <span className={styles.branch}>{branch}</span> | built {dayjs(date).fromNow()} | {message}\n        </p>\n      </LayoutFooter>\n    </div>\n  );\n};\n","import React, { FC } from 'react';\nimport styles from './params-table.module.css'\n\nexport const MissingValueCell: FC = () => {\n  return <td className={styles.missingValueCell}>{'<Value is missing>'}</td>\n};\n","import React, { FC } from 'react';\nimport { ParameterWithPrefix } from '../../core/use-aws-parameters-storage';\nimport { truncate } from './table';\nimport styles from './params-table.module.css';\nimport cn from 'classnames';\nimport { Item, Menu, useContextMenu } from 'react-contexify';\nimport { TriggerEvent } from 'react-contexify/src/types/index';\nimport { CopyIcon } from '@webteam/icons';\nimport * as clipboardy from 'clipboardy';\n\nconst menuId = 'SingleValueCell';\n\nexport const SingleValueCell: FC<{ parameter: ParameterWithPrefix; colorClassMap: Map<string | undefined, string> }> = ({ parameter: { Value }, colorClassMap }) => {\n  const { show } = useContextMenu({ id: menuId });\n\n  function onContextMenu(event: TriggerEvent) {\n    event.preventDefault();\n    show(event, { props: { value: Value } });\n  }\n\n  return (\n    <td onContextMenu={onContextMenu} className={cn(styles.valueCell, colorClassMap.get(Value))}>\n      {truncate(24, Value!)}\n    </td>\n  );\n};\n\nexport const SingleValueCellMenu: FC = () => {\n  return (\n    <Menu id={menuId} animation={false}>\n      <Item onClick={({ props: { value } }) => clipboardy.write(value)} className=\"wt-text-3\">\n        <CopyIcon size=\"xs\" className={styles.copyValueMenuIcon} /> Copy value\n      </Item>\n    </Menu>\n  );\n};\n","import React, { FC } from 'react';\nimport { ParameterWithPrefix } from '../../core/use-aws-parameters-storage';\nimport { truncate } from './table';\nimport styles from './params-table.module.css';\nimport cn from 'classnames';\nimport { SingleValueCell } from './single-value-cell';\n\nexport const MultiValueCell: FC<{ parameters: ParameterWithPrefix[]; colorClassMap: Map<string | undefined, string> }> = ({ parameters, colorClassMap }) => {\n  if (new Set(parameters.map(({ Value }) => Value)).size === 1) return <SingleValueCell parameter={parameters[0]} colorClassMap={colorClassMap} />;\n  return (\n    <td className={cn(styles.valueCell, colorClassMap.get(parameters[0].Value))}>\n      {parameters.map(({ Value, Prefix }) => {\n        const prefix = Prefix.slice(Prefix.lastIndexOf('/') + 1)\n          .replace('lservice', 'ls')\n          .replace('allapps', 'all');\n        return (\n          <p key={Value}>\n            {prefix}: {truncate(12, Value ?? '')}\n          </p>\n        );\n      })}\n    </td>\n  );\n};\n","import React, { FC, useMemo, useState } from 'react';\nimport { ParameterWithPrefix } from '../../core/use-aws-parameters-storage';\nimport styles from './params-table.module.css';\nimport _ from 'lodash';\nimport Input from '@webteam/input';\nimport { Col, Row } from '@webteam/layout';\nimport Fuse from 'fuse.js';\nimport Highlighter from 'react-highlight-words';\nimport cn from 'classnames';\nimport { MissingValueCell } from './missing-value-cell';\nimport { SingleValueCell, SingleValueCellMenu } from './single-value-cell';\nimport { MultiValueCell } from './multi-value-cell';\nimport 'react-contexify/dist/ReactContexify.css';\n\nconst prefixes = ['dev1', 'dev2', 'dev3', 'dev4', 'dev5', 'audt', 'stgn/blue', 'stgn/green'];\n\nexport const truncate = (n: number, s: string): string => (s.length > n ? s.slice(0, n) + '...' : s);\n\nconst colorClasses = [\n  styles.consistent0,\n  styles.consistent1,\n  styles.consistent2,\n  styles.consistent3,\n  styles.consistent4,\n  styles.consistent5,\n  styles.consistent6,\n  styles.consistent7,\n  styles.consistent8,\n];\n\nexport const PrefixRow: FC<{ paramsForName: ParameterWithPrefix[] }> = ({ paramsForName }) => {\n  const colorClassByValue = new Map(Object.entries(_.countBy(paramsForName, 'Value')).map(([value], i) => [value, colorClasses[i]]));\n  return (\n    <>\n      {prefixes.map((prefix) => {\n        const forGivenPrefix = paramsForName.filter((e) => e.Name!.includes(prefix));\n        const key = `${prefix}-value`;\n        const isValueMissing = forGivenPrefix.length <= 0;\n        const isSingleValue = forGivenPrefix.length === 1;\n\n        if (isValueMissing) return <MissingValueCell key={key} />;\n        if (isSingleValue) return <SingleValueCell key={key} parameter={forGivenPrefix[0]} colorClassMap={colorClassByValue} />;\n        return <MultiValueCell key={key} parameters={forGivenPrefix} colorClassMap={colorClassByValue} />;\n      })}\n    </>\n  );\n};\n\nexport const ParametersTable: FC<{ params: ParameterWithPrefix[] }> = ({ params }) => {\n  const [search, setSearch] = useState('');\n  const sortedParams = useMemo(() => {\n    const r = new Map<string, ParameterWithPrefix[]>();\n    params.forEach((p) => {\n      const name = p.Name!.slice(p.Prefix.length);\n      const old = r.get(name) ?? [];\n      r.set(name, [...old, p]);\n    });\n    return Array.from(r.entries())\n      .sort()\n      .map(([name, paramsForName]) => ({ name, paramsForName }));\n  }, [params]);\n  const fused: Fuse.FuseResult<any>[] = useMemo(() => {\n    if (search.trim().length === 0) return sortedParams.map((item) => ({ item, matches: [], refIndex: -1 }));\n    return new Fuse(sortedParams, {\n      keys: ['name'],\n      includeMatches: true,\n      minMatchCharLength: 2,\n      includeScore: true,\n    })\n      .search(search)\n      .filter(({ score }) => (score ?? 0) < 0.5);\n  }, [sortedParams, search]);\n\n  return (\n    <>\n      <Row size=\"0\">\n        <Col span={4}>\n          <Input size=\"xs\" placeholder=\"Search by param name\" onChange={(e) => setSearch(e.target.value)} />\n        </Col>\n      </Row>\n      <table className={cn('wt-table wt-table_wide wt-table_size_xs wt-offset-top-12', styles.paramsTable)}>\n        <thead className=\"wt-text-3\">\n          <tr>\n            <th className={styles.nameTh}>Name</th>\n            {prefixes.map((prefix) => (\n              <th key={prefix} className={styles.envTh}>\n                {prefix}\n              </th>\n            ))}\n          </tr>\n        </thead>\n        <tbody className=\"wt-text-3\">\n          {fused.map(({ item: { name, paramsForName }, matches }, i, list) => {\n            const searchWords = matches?.flatMap(({ indices }) => indices.map((tuple) => name.slice(tuple[0], tuple[1] + 1))) ?? [];\n            const parts = name.split('/');\n            const prevNameParts = i > 0 ? list[i - 1].item.name.split('/') : [];\n            const partsToShow = [...parts];\n            const partsToHide = [];\n            for (let i = 0; i < parts.length; i++) {\n              if (parts[i] === prevNameParts[i]) {\n                partsToShow.shift();\n                partsToHide.push(parts[i]);\n              } else break;\n            }\n            return (\n              <tr key={`${name}-row`}>\n                <td width={400} className={styles.prefixTd}>\n                  <Highlighter searchWords={searchWords} textToHighlight={partsToHide.join('/')} className={styles.hiddenPrefix} />\n                  <Highlighter searchWords={searchWords} textToHighlight={(partsToHide.length > 0 ? '/' : '') + partsToShow.join('/')} />\n                </td>\n                <PrefixRow paramsForName={paramsForName} />\n              </tr>\n            );\n          })}\n        </tbody>\n      </table>\n      <SingleValueCellMenu />\n    </>\n  );\n};\n","\nexport interface Prefix {\n  tomcat: string;\n  lservice: string;\n  allapps: string;\n}\n\nexport const envPrefixes: Prefix[] = [\n  {\n    tomcat: '/jetprofile-dev1/',\n    lservice: '/jetprofile/dev1/lservice',\n    allapps: '/jetprofile/dev1/allapps',\n  },\n  {\n    tomcat: '/jetprofile-dev2/',\n    lservice: '/jetprofile/dev2/lservice',\n    allapps: '/jetprofile/dev2/allapps',\n  },\n  {\n    tomcat: '/jetprofile-dev3/',\n    lservice: '/jetprofile/dev3/lservice',\n    allapps: '/jetprofile/dev3/allapps',\n  },\n  {\n    tomcat: '/jetprofile-dev4/',\n    lservice: '/jetprofile/dev4/lservice',\n    allapps: '/jetprofile/dev4/allapps',\n  },\n  {\n    tomcat: '/jetprofile-dev5/',\n    lservice: '/jetprofile/dev5/lservice',\n    allapps: '/jetprofile/dev5/allapps',\n  },\n  {\n    tomcat: '/jetprofile-audt/',\n    lservice: '/jetprofile/audt/lservice',\n    allapps: '/jetprofile/audt/allapps',\n  },\n  {\n    tomcat: '/jetprofile-stgn/',\n    lservice: '/jetprofile/stgn/blue/lservice',\n    allapps: '/jetprofile/stgn/blue/allapps',\n  },\n  {\n    tomcat: '/jetprofile-stgn/',\n    lservice: '/jetprofile/stgn/green/lservice',\n    allapps: '/jetprofile/stgn/green/allapps',\n  },\n];\n","import { ParameterWithPrefix } from './use-aws-parameters-storage';\nimport { envPrefixes } from './env-prefixes';\nimport AWS, { AWSError, Credentials } from 'aws-sdk';\nimport { GetParametersByPathResult, Parameter } from 'aws-sdk/clients/ssm';\n\nconst progressLine = (prefix: string, page: number, total: number, prevTotal: number): JSX.Element => {\n  const prefixAndTotal = (\n    <>\n      prefix: '{prefix}', total: <strong>{total}</strong>\n    </>\n  );\n  if (prevTotal === 0) return <>Loading, {prefixAndTotal} </>;\n  const percent = Math.ceil((total * 100) / prevTotal);\n\n  return (\n    <>\n      <strong>{percent}%</strong>\n      &nbsp;({prefixAndTotal}&nbsp;of&nbsp;<strong>{prevTotal}</strong>)\n    </>\n  );\n};\n\nexport const refreshParams = async (\n  accessKey: string,\n  secretKey: string,\n  prevTotal: number,\n  onError: (e: AWSError) => void,\n  onProgress: (s: JSX.Element) => void,\n  onReady: (result: ParameterWithPrefix[]) => void,\n) => {\n  const ssm = new AWS.SSM({ region: 'eu-west-1', credentials: new Credentials(accessKey, secretKey) });\n\n  const result: ParameterWithPrefix[] = [];\n  const flatPrefixes = envPrefixes.flatMap(({ tomcat, allapps, lservice }) => [tomcat, lservice, allapps]);\n  const allPrefixes = new Set(flatPrefixes);\n\n  for (const prefix of Array.from(allPrefixes)) {\n    await new Promise((resolve) => {\n      let page = 1;\n      const request = ssm.getParametersByPath({ Path: prefix, Recursive: true, WithDecryption: true });\n      request.eachPage((err: AWSError, data: GetParametersByPathResult, doneCallback) => {\n        onProgress(progressLine(prefix, page, result.length, prevTotal));\n        if (err) onError(err);\n        if (!doneCallback?.()) {\n          if (data?.Parameters)\n            result.push(\n              ...data?.Parameters.map((e: Parameter) => {\n                (e as ParameterWithPrefix).Prefix = prefix;\n                return e as ParameterWithPrefix;\n              }),\n            );\n          page++;\n        }\n        if (data == null) resolve(undefined);\n        return true;\n      });\n    });\n  }\n  onReady(result);\n};\n","import { Col, Row } from '@webteam/layout';\nimport React, { FC } from 'react';\nimport Logo from '../../images/panamera-logo.png';\nimport styles from './loading.module.css';\n\nexport const Loading: FC<{ title: JSX.Element | undefined }> = ({ title }) => {\n  if (!title) return null;\n\n  return (\n    <Row justify=\"around\" alignItems=\"center\" direction={\"column\"} size=\"0\">\n      <Col span=\"inline\">\n        <div className={styles.logoContainer}>\n          <img src={Logo} width={64} alt=\"Panamera logo\" className={styles.logo} />\n        </div>\n      </Col>\n      <Col span={\"inline\"}>\n        <p className=\"wt-text-2\">{title}</p>\n      </Col>\n    </Row>\n  );\n};\n","import React, { FC, useEffect, useState } from 'react';\nimport { useAwsCredentials } from '../../core/use-aws-credentials';\nimport { maskKey } from '../../common/helpers';\nimport { AWSError } from 'aws-sdk';\nimport { ParameterWithPrefix, useAwsParametersStorage } from '../../core/use-aws-parameters-storage';\nimport dayjs from 'dayjs';\nimport { ErrorDiv } from '../error-div';\nimport Button from '@webteam/button';\nimport { ParametersTable } from './table';\nimport { refreshParams } from '../../core/refresh-params';\nimport { Loading } from '../loading';\n\nexport const MainPage: FC = () => {\n  const { credentials, removeCredentials } = useAwsCredentials();\n  const { accessKey, secretKey } = credentials ?? { accessKey: '', secretKey: '' };\n  const [loading, setLoading] = useState<JSX.Element>();\n  const [errors, setErrors] = useState<AWSError[]>([]);\n  const { value, setValue, removeValue } = useAwsParametersStorage();\n  const { fetchedAt, parameters } = value ?? { fetchedAt: undefined, parameters: [] };\n  const [once, setOnce] = useState(true);\n\n  const onRefreshClicked = () => {\n    setErrors([]);\n    refreshParams(\n      accessKey,\n      secretKey,\n      parameters.length,\n      (error: AWSError) => setErrors((errors) => [...errors, error]),\n      (s: JSX.Element) => setLoading(s),\n      (result: ParameterWithPrefix[]) => {\n        setLoading(undefined);\n        setValue({ fetchedAt: new Date(), parameters: result });\n      },\n    ).catch(console.error);\n  };\n\n  const onSignOut = () => {\n    removeCredentials();\n    removeValue();\n  };\n\n  useEffect(() => {\n    if (loading === undefined && parameters?.length === 0 && accessKey !== '' && once) {\n      debugger;\n      onRefreshClicked();\n      setOnce(false);\n    }\n  }, [loading, parameters, accessKey, once, setOnce, onRefreshClicked]);\n\n  return (\n    <>\n      <div className=\"wt-text-2\">\n        Using key: <strong>{maskKey(accessKey)}</strong> | Fetched <strong>{parameters?.length}</strong> parameters <strong>{fetchedAt ? dayjs(fetchedAt).fromNow() : ''}</strong> |{' '}\n        <Button size=\"xs\" mode=\"nude\" onClick={onRefreshClicked} disabled={!!loading}>\n          Refresh\n        </Button>{' '}\n        |{' '}\n        <Button size=\"xs\" mode=\"nude\" onClick={onSignOut}>\n          Sign out\n        </Button>\n      </div>\n      <div className=\"wt-offset-top-12\" />\n      {errors.length > 0 && <ErrorDiv error={new Error(`Got ${errors.length} unexpected error while refreshing params`)} />}\n      {loading === undefined && parameters?.length === 0 && (\n        <p className=\"wt-text-2\">\n          Parameters table is empty, press <strong>Refresh</strong> above to fill it\n        </p>\n      )}\n      <Loading title={loading} />\n      {!loading && parameters.length > 0 && <ParametersTable params={parameters} />}\n    </>\n  );\n};\n","import { Parameter } from 'aws-sdk/clients/ssm';\nimport { useLocalStorage } from './use-local-storage';\n\ninterface ParametersStorage {\n  fetchedAt: Date | undefined;\n  parameters: ParameterWithPrefix[];\n}\n\nexport type ParameterWithPrefix = { Prefix: string } & Parameter;\n\nexport const useAwsParametersStorage = () => {\n  return useLocalStorage<ParametersStorage>('aws-params');\n};\n","import React, { FC } from 'react';\nimport '@webteam/typography';\nimport { useAwsCredentials } from '../../core/use-aws-credentials';\nimport { CredentialsPage } from '../creds-prompt';\nimport { Route, Switch } from 'react-router-dom';\nimport { RouteWithCredentials } from '../route-with-credentials';\nimport { PageTemplate } from '../page';\nimport { MainPage } from '../main-page';\n\nexport const App: FC = () => {\n  return (\n    <PageTemplate>\n      <Switch>\n        <Route path=\"/credentials\">\n          <CredentialsPage />\n        </Route>\n        <RouteWithCredentials path=\"/\" exact={true}>\n          <MainPage />\n        </RouteWithCredentials>\n      </Switch>\n    </PageTemplate>\n  );\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport dayjs from 'dayjs';\nimport relativeTime from 'dayjs/plugin/relativeTime';\nimport 'reset-css';\nimport './styles/restore.css';\nimport '@webteam/colors/lib/index.css';\nimport { App } from './components/app';\nimport { HashRouter } from 'react-router-dom';\n\ndayjs.extend(relativeTime);\n\nReactDOM.render(\n  <React.StrictMode>\n    <HashRouter>\n      <App />\n    </HashRouter>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// reportWebVitals(console.log);\n"],"sourceRoot":""}