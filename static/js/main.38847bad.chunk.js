(this.webpackJsonppanamera=this.webpackJsonppanamera||[]).push([[0],{162:function(e,t){},169:function(e,t,n){e.exports={logoContainer:"loading_logoContainer__10WD-",logo:"loading_logo__f_02B",rotate:"loading_rotate__1s8fQ"}},18:function(e,t,n){e.exports={allTheSameRow:"params-table_allTheSameRow__2SPTF",paramsTable:"params-table_paramsTable__sEcuf",missingValueCell:"params-table_missingValueCell__3FAgM",nameTh:"params-table_nameTh__2elJw",envTh:"params-table_envTh__20z_z",valueCell:"params-table_valueCell__3uKF-",consistent0:"params-table_consistent0__nk44Y",consistent1:"params-table_consistent1__3Z1kP",consistent2:"params-table_consistent2__3wpqd",consistent3:"params-table_consistent3__2BjrA",consistent4:"params-table_consistent4__3gna6",consistent5:"params-table_consistent5__qe5XP",consistent6:"params-table_consistent6__1dqVQ",consistent7:"params-table_consistent7__nSmXD",consistent8:"params-table_consistent8__3hWSc",copyValueMenuIcon:"params-table_copyValueMenuIcon__1PEoo"}},261:function(e,t,n){e.exports={verticalLine:"creds-prompt_verticalLine__Tx2pu"}},262:function(e,t,n){e.exports={linkButton:"link-button_linkButton__2xyCc"}},263:function(e,t,n){e.exports={errorDiv:"error-div_errorDiv__1C-Yp"}},282:function(e,t,n){},83:function(e,t,n){e.exports={wideDiv:"page_wideDiv__2inSG",pageContainer:"page_pageContainer__sagIe",contentWrapper:"page_contentWrapper__3aSSW",footer:"page_footer__3hx7W",branch:"page_branch__1t1gv"}},915:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n(0),s=n.n(r),c=n(253),i=n.n(c),l=n(61),o=n.n(l),u=n(254),j=n.n(u),d=(n(281),n(282),n(283),n(916),n(22)),p=n(261),b=n.n(p),m=n(17),f=n.n(m),h=n(20),v=n(35),x=n(28),O=n(118),g=n(5),_=n.n(g),w=n(262),y=n.n(w),N=function(e){var t=e.children,n=Object(O.a)(e,["children"]);return Object(a.jsx)("button",Object(x.a)(Object(x.a)({},n),{},{className:_()("wt-link",y.a.linkButton),children:t}))},C=n(263),S=n.n(C),k=function(e){var t=e.className,n=e.error;return n?Object(a.jsxs)("div",{className:_()(S.a.errorDiv,"wt-text-2",t),children:["Error: ",n.message]}):null},M=n(264),V=n.n(M),F=n(120),P=n(170),T=function(e){return e.split("").map((function(t,n){return n<6||n>e.length-4?t:"*"})).join("")},I=function(e,t){try{var n=e();n instanceof Promise&&n.catch(t)}catch(a){t(a)}},z=function(){var e=Object(v.a)(f.a.mark((function e(){var t,n,a,r,s,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.showOpenFilePicker({multiple:!1});case 2:return t=e.sent,n=Object(h.a)(t,1),a=n[0],e.next=7,a.getFile();case 7:if("credentials"===(r=e.sent).name){e.next=10;break}throw new Error("File should be named 'credentials'");case 10:return e.t0=V.a,e.next=13,r.text();case 13:return e.t1=e.sent,s=e.t0.parse.call(e.t0,e.t1),c=F.a().shape({aws_access_key_id:F.b().required(),aws_secret_access_key:F.b().required()}),e.abrupt("return",Object.entries(s).filter((function(e){var t=Object(h.a)(e,2)[1];return c.isValidSync(t)})).map((function(e){var t=Object(h.a)(e,2),n=t[0],a=t[1];return[n,{accessKey:a.aws_access_key_id,secretKey:a.aws_secret_access_key}]})));case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(e){var t=e.onCredentialsSelected,n=Object(r.useState)(),s=Object(h.a)(n,2),c=s[0],i=s[1],l=Object(r.useState)(),o=Object(h.a)(l,2),u=o[0],j=o[1];Object(r.useEffect)((function(){u&&1===u.length&&t(u[0][1])}),[u,t]);var d=function(){var e=Object(v.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i(void 0),I(Object(v.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=j,e.next=3,z();case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)}))),i);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return u?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h4",{className:"wt-h4",children:"Select profile to use:"}),Object(a.jsx)("div",{className:"wt-offset-top-12"}),Object(a.jsx)(P.a,{size:"xs",children:u.map((function(e){var n=Object(h.a)(e,2),r=n[0],s=n[1];return Object(a.jsxs)(P.b,{onClick:function(){return t(s)},children:[r," (",T(s.accessKey),")"]},r)}))})]}):Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"wt-text-2",children:[Object(a.jsx)(N,{onClick:d,children:"Import"})," credentials from ",Object(a.jsx)("strong",{children:"~/.aws/credentials"}),Object(a.jsx)(k,{className:"wt-offset-top-12",error:c})]})})},K=n(274),E=function(e){try{var t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(n){return console.error("Failed to read value from local storage",n),void localStorage.removeItem(e)}},W=function(){var e=Object(v.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(e){var t=Object(K.a)(e,W,{initialData:E(e)}),n=t.data,a=t.mutate;return{value:n,setValue:function(t){localStorage.setItem(e,JSON.stringify(t)),a(t).catch(console.error)},removeValue:function(){localStorage.removeItem(e),a(void 0).catch(console.error)}}},B=function(){var e=A("aws-credentials");return{credentials:e.value,setCredentials:e.setValue,removeCredentials:e.removeValue}},q=n(16),J=function(){var e,t,n=B(),s=n.credentials,c=n.setCredentials,i=Object(q.g)(),l=Object(q.h)(),o=null!==(e=null===l||void 0===l||null===(t=l.state)||void 0===t?void 0:t.from)&&void 0!==e?e:"/";return Object(r.useEffect)((function(){void 0!==s&&i.push(o)}),[s,i,o]),Object(a.jsxs)(d.f,{children:[Object(a.jsx)(d.a,{span:4,children:Object(a.jsx)(D,{onCredentialsSelected:function(e){c(e),i.push(o)}})}),Object(a.jsx)(d.a,{span:"inline",children:Object(a.jsx)("div",{className:b.a.verticalLine})}),Object(a.jsx)(d.a,{span:"inline",children:Object(a.jsxs)("ul",{className:"wt-ul",children:[Object(a.jsx)("li",{children:"Keys will be used for read-only operations"}),Object(a.jsx)("li",{children:"Keys will be stored in browser local storage"}),Object(a.jsx)("li",{children:"Keys will be used only from this webapp, they are not transferred anywhere"}),Object(a.jsx)("li",{children:"You can remove them anytime you want later by clicking 'Sign out' link"})]})})]})},L=function(e){var t=e.children,n=Object(O.a)(e,["children"]),r=B().credentials;return Object(a.jsx)(q.b,Object(x.a)(Object(x.a)({},n),{},{children:function(e){var n=e.location;return void 0===r?Object(a.jsx)(q.a,{to:{pathname:"/credentials",state:{from:n}}}):t}}))},R=n(83),Y=n.n(R),H=function(e){var t=e.children,n={branch:"main",tags:[],commit:{shortHash:"f10fd14",hash:"f10fd142b27fa365f61b78ecd2bc87eadcb12d50",date:"2021-01-12T03:13:05+03:00",message:"Add loading banner and progress indication"}},r=n.branch,s=n.commit,c=s.date,i=s.shortHash,l=s.message;return Object(a.jsxs)("div",{className:Y.a.pageContainer,children:[Object(a.jsxs)("div",{className:Y.a.contentWrapper,children:[Object(a.jsx)(d.e,{children:Object(a.jsx)("h1",{className:"wt-h1",children:"Panamera: parameter naming errors resolution assistant"})}),Object(a.jsx)(d.c,{className:"wt-offset-top-24",children:t})]}),Object(a.jsxs)(d.d,{className:Y.a.footer,children:[Object(a.jsx)(d.b,{}),Object(a.jsxs)("p",{className:"wt-text-3",children:[i," | ",Object(a.jsx)("span",{className:Y.a.branch,children:r})," | built ",o()(c).fromNow()," | ",l]})]})]})},G=n(10),Q=n(171),X=n(18),U=n.n(X),Z=n(270),$=n.n(Z),ee=n(275),te=n(271),ne=n(272),ae=n.n(ne),re=function(){return Object(a.jsx)("td",{className:U.a.missingValueCell,children:"<Value is missing>"})},se=n(121),ce=n(918),ie=n(273),le="SingleValueCell",oe=function(e){var t=e.parameter.Value,n=e.colorClassMap,r=Object(se.c)({id:le}).show;return Object(a.jsx)("td",{onContextMenu:function(e){e.preventDefault(),r(e,{props:{value:t}})},className:_()(U.a.valueCell,n.get(t)),children:pe(24,t)})},ue=function(){return Object(a.jsx)(se.b,{id:le,animation:!1,children:Object(a.jsxs)(se.a,{onClick:function(e){var t=e.props.value;return ie.a(t)},className:"wt-text-3",children:[Object(a.jsx)(ce.a,{size:"xs",className:U.a.copyValueMenuIcon})," Copy value"]})})},je=function(e){var t=e.parameters,n=e.colorClassMap;return 1===new Set(t.map((function(e){return e.Value}))).size?Object(a.jsx)(oe,{parameter:t[0],colorClassMap:n}):Object(a.jsx)("td",{className:_()(U.a.valueCell,n.get(t[0].Value)),children:t.map((function(e){var t=e.Value,n=e.Prefix,r=n.slice(n.lastIndexOf("/")+1).replace("lservice","ls").replace("allapps","all");return Object(a.jsxs)("p",{children:[r,": ",pe(12,null!==t&&void 0!==t?t:"")]},t)}))})},de=(n(517),["dev1","dev2","dev3","dev4","dev5","audt","stgn/blue","stgn/green"]),pe=function(e,t){return t.length>e?t.slice(0,e)+"...":t},be=[U.a.consistent0,U.a.consistent1,U.a.consistent2,U.a.consistent3,U.a.consistent4,U.a.consistent5,U.a.consistent6,U.a.consistent7,U.a.consistent8],me=function(e){var t=e.paramsForName,n=new Map(Object.entries($.a.countBy(t,"Value")).map((function(e,t){return[Object(h.a)(e,1)[0],be[t]]})));return Object(a.jsx)(a.Fragment,{children:de.map((function(e){var r=t.filter((function(t){return t.Name.includes(e)})),s="".concat(e,"-value"),c=r.length<=0,i=1===r.length;return c?Object(a.jsx)(re,{},s):i?Object(a.jsx)(oe,{parameter:r[0],colorClassMap:n},s):Object(a.jsx)(je,{parameters:r,colorClassMap:n},s)}))})},fe=function(e){var t=e.params,n=Object(r.useState)(""),s=Object(h.a)(n,2),c=s[0],i=s[1],l=Object(r.useMemo)((function(){var e=new Map;return t.forEach((function(t){var n,a=t.Name.slice(t.Prefix.length),r=null!==(n=e.get(a))&&void 0!==n?n:[];e.set(a,[].concat(Object(G.a)(r),[t]))})),Array.from(e.entries()).sort().map((function(e){var t=Object(h.a)(e,2);return{name:t[0],paramsForName:t[1]}}))}),[t]),o=Object(r.useMemo)((function(){return 0===c.trim().length?l.map((function(e){return{item:e,matches:[],refIndex:-1}})):new te.a(l,{keys:["name"],includeMatches:!0,minMatchCharLength:2,includeScore:!0}).search(c).filter((function(e){var t=e.score;return(null!==t&&void 0!==t?t:0)<.5}))}),[l,c]);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(d.f,{size:"0",children:Object(a.jsx)(d.a,{span:4,children:Object(a.jsx)(ee.a,{size:"xs",placeholder:"Search by param name",onChange:function(e){return i(e.target.value)}})})}),Object(a.jsxs)("table",{className:_()("wt-table wt-table_wide wt-table_size_xs wt-offset-top-12",U.a.paramsTable),children:[Object(a.jsx)("thead",{className:"wt-text-3",children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{className:U.a.nameTh,children:"Name"}),de.map((function(e){return Object(a.jsx)("th",{className:U.a.envTh,children:e},e)}))]})}),Object(a.jsx)("tbody",{className:"wt-text-3",children:o.map((function(e){var t,n=e.item,r=n.name,s=n.paramsForName,c=e.matches,i=null!==(t=null===c||void 0===c?void 0:c.flatMap((function(e){return e.indices.map((function(e){return r.slice(e[0],e[1]+1)}))})))&&void 0!==t?t:[];return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{width:400,children:Object(a.jsx)(ae.a,{searchWords:i,textToHighlight:r})}),Object(a.jsx)(me,{paramsForName:s})]},"".concat(r,"-row"))}))})]}),Object(a.jsx)(ue,{})]})},he=[{tomcat:"/jetprofile-dev1/",lservice:"/jetprofile/dev1/lservice",allapps:"/jetprofile/dev1/allapps"},{tomcat:"/jetprofile-dev2/",lservice:"/jetprofile/dev2/lservice",allapps:"/jetprofile/dev2/allapps"},{tomcat:"/jetprofile-dev3/",lservice:"/jetprofile/dev3/lservice",allapps:"/jetprofile/dev3/allapps"},{tomcat:"/jetprofile-dev4/",lservice:"/jetprofile/dev4/lservice",allapps:"/jetprofile/dev4/allapps"},{tomcat:"/jetprofile-dev5/",lservice:"/jetprofile/dev5/lservice",allapps:"/jetprofile/dev5/allapps"},{tomcat:"/jetprofile-audt/",lservice:"/jetprofile/audt/lservice",allapps:"/jetprofile/audt/allapps"},{tomcat:"/jetprofile-stgn/",lservice:"/jetprofile/stgn/blue/lservice",allapps:"/jetprofile/stgn/blue/allapps"},{tomcat:"/jetprofile-stgn/",lservice:"/jetprofile/stgn/green/lservice",allapps:"/jetprofile/stgn/green/allapps"}],ve=n(168),xe=n.n(ve),Oe=function(e,t,n,r){var s=Object(a.jsxs)(a.Fragment,{children:["prefix: '",e,"', total: ",Object(a.jsx)("strong",{children:n})]});if(0===r)return Object(a.jsxs)(a.Fragment,{children:["Loading, ",s," "]});var c=Math.ceil(100*n/r);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("strong",{children:[c,"%"]}),"\xa0(",s,"\xa0of\xa0",Object(a.jsx)("strong",{children:r}),")"]})},ge=function(){var e=Object(v.a)(f.a.mark((function e(t,n,a,r,s,c){var i,l,o,u,j,d,p;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=new xe.a.SSM({region:"eu-west-1",credentials:new ve.Credentials(t,n)}),l=[],o=he.flatMap((function(e){var t=e.tomcat,n=e.allapps;return[t,e.lservice,n]})),u=new Set(o),j=f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p[d],e.next=3,new Promise((function(e){i.getParametersByPath({Path:t,Recursive:!0,WithDecryption:!0}).eachPage((function(n,c,i){return s(Oe(t,0,l.length,a)),n&&r(n),(null===i||void 0===i?void 0:i())||((null===c||void 0===c?void 0:c.Parameters)&&l.push.apply(l,Object(G.a)(null===c||void 0===c?void 0:c.Parameters.map((function(e){return e.Prefix=t,e}))))),null==c&&e(void 0),!0}))}));case 3:case"end":return e.stop()}}),e)})),d=0,p=Array.from(u);case 6:if(!(d<p.length)){e.next=11;break}return e.delegateYield(j(),"t0",8);case 8:d++,e.next=6;break;case 11:c(l);case 12:case"end":return e.stop()}}),e)})));return function(t,n,a,r,s,c){return e.apply(this,arguments)}}(),_e=n.p+"static/media/panamera-logo.0e64dd04.png",we=n(169),ye=n.n(we),Ne=function(e){var t=e.title;return t?Object(a.jsxs)(d.f,{justify:"around",alignItems:"center",direction:"column",size:"0",children:[Object(a.jsx)(d.a,{span:"inline",children:Object(a.jsx)("div",{className:ye.a.logoContainer,children:Object(a.jsx)("img",{src:_e,width:64,alt:"Panamera logo",className:ye.a.logo})})}),Object(a.jsx)(d.a,{span:"inline",children:Object(a.jsx)("p",{className:"wt-text-2",children:t})})]}):null},Ce=function(){var e=B(),t=e.credentials,n=e.removeCredentials,s=null!==t&&void 0!==t?t:{accessKey:"",secretKey:""},c=s.accessKey,i=s.secretKey,l=Object(r.useState)(),u=Object(h.a)(l,2),j=u[0],d=u[1],p=Object(r.useState)([]),b=Object(h.a)(p,2),m=b[0],f=b[1],v=A("aws-params"),x=v.value,O=v.setValue,g=v.removeValue,_=null!==x&&void 0!==x?x:{fetchedAt:void 0,parameters:[]},w=_.fetchedAt,y=_.parameters;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"wt-text-2",children:["Using key: ",Object(a.jsx)("strong",{children:T(c)})," | Fetched ",Object(a.jsx)("strong",{children:null===y||void 0===y?void 0:y.length})," parameters ",Object(a.jsx)("strong",{children:w?o()(w).fromNow():""})," |"," ",Object(a.jsx)(Q.a,{size:"xs",mode:"nude",onClick:function(){f([]),ge(c,i,y.length,(function(e){return f((function(t){return[].concat(Object(G.a)(t),[e])}))}),(function(e){return d(e)}),(function(e){d(void 0),O({fetchedAt:new Date,parameters:e})})).catch(console.error)},disabled:!!j,children:"Refresh"})," ","|"," ",Object(a.jsx)(Q.a,{size:"xs",mode:"nude",onClick:function(){n(),g()},children:"Sign out"})]}),Object(a.jsx)("div",{className:"wt-offset-top-12"}),m.length>0&&Object(a.jsx)(k,{error:new Error("Got ".concat(m.length," unexpected error while refreshing params"))}),void 0===j&&0===(null===y||void 0===y?void 0:y.length)&&Object(a.jsxs)("p",{className:"wt-text-2",children:["Parameters table is empty, press ",Object(a.jsx)("strong",{children:"Refresh"})," above to fill it"]}),Object(a.jsx)(Ne,{title:j}),!j&&y.length>0&&Object(a.jsx)(fe,{params:y})]})},Se=function(){return Object(a.jsx)(H,{children:Object(a.jsxs)(q.d,{children:[Object(a.jsx)(q.b,{path:"/credentials",children:Object(a.jsx)(J,{})}),Object(a.jsx)(L,{path:"/",exact:!0,children:Object(a.jsx)(Ce,{})})]})})},ke=n(78);o.a.extend(j.a),i.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(ke.a,{children:Object(a.jsx)(Se,{})})}),document.getElementById("root"))}},[[915,1,2]]]);
//# sourceMappingURL=main.38847bad.chunk.js.map