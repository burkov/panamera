(this.webpackJsonppanamera=this.webpackJsonppanamera||[]).push([[0],{15:function(e,t,a){e.exports={allTheSameRow:"params-table_allTheSameRow__3CCOY",highlightedPrefix:"params-table_highlightedPrefix__37Yez",hiddenPrefix:"params-table_hiddenPrefix__YgYLA",prefixTd:"params-table_prefixTd__1mNDq",paramsTable:"params-table_paramsTable___sOO_",missingValueCell:"params-table_missingValueCell__1hH2l",nameTh:"params-table_nameTh__oi43S",envTh:"params-table_envTh__1JeHJ",valueCell:"params-table_valueCell__2mjZT",consistent0:"params-table_consistent0__Ow-Ln",consistent1:"params-table_consistent1__1ZV01",consistent2:"params-table_consistent2__xmXvl",consistent3:"params-table_consistent3__2Bmek",consistent4:"params-table_consistent4__3aREX",consistent5:"params-table_consistent5__izqq_",consistent6:"params-table_consistent6__23GbH",consistent7:"params-table_consistent7__3nAoG",consistent8:"params-table_consistent8__2tWNr",copyValueMenuIcon:"params-table_copyValueMenuIcon__hKYoz"}},162:function(e,t){},170:function(e,t,a){e.exports={logoContainer:"loading_logoContainer__2pK1h",logo:"loading_logo__1Blvu",rotate:"loading_rotate__1C1SK"}},262:function(e,t,a){e.exports={verticalLine:"creds-prompt_verticalLine__2J2OF"}},263:function(e,t,a){e.exports={linkButton:"link-button_linkButton__3dv5j"}},264:function(e,t,a){e.exports={errorDiv:"error-div_errorDiv__Qlt17"}},282:function(e,t,a){},68:function(e,t,a){e.exports={wideDiv:"page_wideDiv__3Ly0I",logo:"page_logo__1EzYP",pageContainer:"page_pageContainer__1-f0R",contentWrapper:"page_contentWrapper__1Z4k4",footer:"page_footer__3xgI4",branch:"page_branch__vkeOO"}},915:function(e,t,a){"use strict";a.r(t);var n=a(3),r=a(0),s=a.n(r),c=a(254),i=a.n(c),l=a(61),o=a.n(l),u=a(255),j=a.n(u),d=(a(281),a(282),a(283),a(916),a(20)),p=a(262),b=a.n(p),m=a(19),h=a.n(m),f=a(18),v=a(35),x=a(28),O=a(118),g=a(5),_=a.n(g),w=a(263),N=a.n(w),y=function(e){var t=e.children,a=Object(O.a)(e,["children"]);return Object(n.jsx)("button",Object(x.a)(Object(x.a)({},a),{},{className:_()("wt-link",N.a.linkButton),children:t}))},C=a(264),k=a.n(C),S=function(e){var t=e.className,a=e.error;return a?Object(n.jsxs)("div",{className:_()(k.a.errorDiv,"wt-text-2",t),children:["Error: ",a.message]}):null},P=a(265),V=a.n(P),M=a(120),F=a(171),T=function(e){return e.split("").map((function(t,a){return a<6||a>e.length-4?t:"*"})).join("")},z=function(e,t){try{var a=e();a instanceof Promise&&a.catch(t)}catch(n){t(n)}},I=function(){var e=Object(v.a)(h.a.mark((function e(){var t,a,n,r,s,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.showOpenFilePicker({multiple:!1});case 2:return t=e.sent,a=Object(f.a)(t,1),n=a[0],e.next=7,n.getFile();case 7:if("credentials"===(r=e.sent).name){e.next=10;break}throw new Error("File should be named 'credentials'");case 10:return e.t0=V.a,e.next=13,r.text();case 13:return e.t1=e.sent,s=e.t0.parse.call(e.t0,e.t1),c=M.a().shape({aws_access_key_id:M.b().required(),aws_secret_access_key:M.b().required()}),e.abrupt("return",Object.entries(s).filter((function(e){var t=Object(f.a)(e,2)[1];return c.isValidSync(t)})).map((function(e){var t=Object(f.a)(e,2),a=t[0],n=t[1];return[a,{accessKey:n.aws_access_key_id,secretKey:n.aws_secret_access_key}]})));case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(e){var t=e.onCredentialsSelected,a=Object(r.useState)(),s=Object(f.a)(a,2),c=s[0],i=s[1],l=Object(r.useState)(),o=Object(f.a)(l,2),u=o[0],j=o[1];Object(r.useEffect)((function(){u&&1===u.length&&t(u[0][1])}),[u,t]);var d=function(){var e=Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i(void 0),z(Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=j,e.next=3,I();case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)}))),i);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return u?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h4",{className:"wt-h4",children:"Select profile to use:"}),Object(n.jsx)("div",{className:"wt-offset-top-12"}),Object(n.jsx)(F.a,{size:"xs",children:u.map((function(e){var a=Object(f.a)(e,2),r=a[0],s=a[1];return Object(n.jsxs)(F.b,{onClick:function(){return t(s)},children:[r," (",T(s.accessKey),")"]},r)}))})]}):Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"wt-text-2",children:[Object(n.jsx)(y,{onClick:d,children:"Import"})," credentials from ",Object(n.jsx)("strong",{children:"~/.aws/credentials"}),Object(n.jsx)(S,{className:"wt-offset-top-12",error:c})]})})},D=a(274),E=function(e){try{var t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(a){return console.error("Failed to read value from local storage",a),void localStorage.removeItem(e)}},L=function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(e){var t=Object(D.a)(e,L,{initialData:E(e)}),a=t.data,n=t.mutate;return{value:a,setValue:function(t){localStorage.setItem(e,JSON.stringify(t)),n(t).catch(console.error)},removeValue:function(){localStorage.removeItem(e),n(void 0).catch(console.error)}}},R=function(){var e=B("aws-credentials");return{credentials:e.value,setCredentials:e.setValue,removeCredentials:e.removeValue}},Y=a(17),A=function(){var e,t,a=R(),s=a.credentials,c=a.setCredentials,i=Object(Y.g)(),l=Object(Y.h)(),o=null!==(e=null===l||void 0===l||null===(t=l.state)||void 0===t?void 0:t.from)&&void 0!==e?e:"/";return Object(r.useEffect)((function(){void 0!==s&&i.push(o)}),[s,i,o]),Object(n.jsxs)(d.f,{size:"0",children:[Object(n.jsx)(d.a,{span:4,children:Object(n.jsx)(K,{onCredentialsSelected:function(e){c(e),i.push(o)}})}),Object(n.jsx)(d.a,{span:"inline",children:Object(n.jsx)("div",{className:b.a.verticalLine})}),Object(n.jsx)(d.a,{span:"inline",children:Object(n.jsxs)("ul",{className:"wt-ul",children:[Object(n.jsx)("li",{children:"Keys will be used for read-only operations"}),Object(n.jsx)("li",{children:"Keys will be stored in browser local storage"}),Object(n.jsx)("li",{children:"Keys will be used only from this webapp, they are not transferred anywhere"}),Object(n.jsx)("li",{children:"You can remove them anytime you want later by clicking 'Sign out' link"})]})})]})},H=function(e){var t=e.children,a=Object(O.a)(e,["children"]),r=R().credentials;return Object(n.jsx)(Y.b,Object(x.a)(Object(x.a)({},a),{},{children:function(e){var a=e.location;return void 0===r?Object(n.jsx)(Y.a,{to:{pathname:"/credentials",state:{from:a}}}):t}}))},J=a(68),W=a.n(J),q=a.p+"static/media/panamera-logo.0e64dd04.png",G=function(e){var t=e.children,a={branch:"main",tags:[],commit:{shortHash:"57bb91f",hash:"57bb91fd0163b30a64b5c5494f21c072905a9094",date:"2021-01-12T12:46:43+03:00",message:"Remove horizontal scroll"}},r=a.branch,s=a.commit,c=s.date,i=s.shortHash,l=s.message;return Object(n.jsxs)("div",{className:W.a.pageContainer,children:[Object(n.jsxs)("div",{className:W.a.contentWrapper,children:[Object(n.jsx)(d.e,{children:Object(n.jsxs)(d.f,{size:"s",alignItems:"center",children:[Object(n.jsx)(d.a,{span:"inline",children:Object(n.jsx)("img",{src:q,width:32,alt:"Logo",className:W.a.logo})}),Object(n.jsx)(d.a,{span:"inline",children:Object(n.jsx)("h1",{className:"wt-h1",children:"Panamera: parameters naming errors resolution assistant"})})]})}),Object(n.jsx)(d.c,{className:"wt-offset-top-24",children:t})]}),Object(n.jsxs)(d.d,{className:W.a.footer,children:[Object(n.jsx)(d.b,{}),Object(n.jsxs)("p",{className:"wt-text-3",children:[i," | ",Object(n.jsx)("span",{className:W.a.branch,children:r})," | built ",o()(c).fromNow()," | ",l]})]})]})},Z=a(10),X=a(172),Q=a(15),U=a.n(Q),$=a(271),ee=a.n($),te=a(275),ae=a(272),ne=a(168),re=a.n(ne),se=function(){return Object(n.jsx)("td",{className:U.a.missingValueCell,children:"<Value is missing>"})},ce=a(121),ie=a(918),le=a(273),oe="SingleValueCell",ue=function(e){var t=e.parameter.Value,a=e.colorClassMap,r=Object(ce.c)({id:oe}).show;return Object(n.jsx)("td",{onContextMenu:function(e){e.preventDefault(),r(e,{props:{value:t}})},className:_()(U.a.valueCell,a.get(t)),children:be(24,t)})},je=function(){return Object(n.jsx)(ce.b,{id:oe,animation:!1,children:Object(n.jsxs)(ce.a,{onClick:function(e){var t=e.props.value;return le.a(t)},className:"wt-text-3",children:[Object(n.jsx)(ie.a,{size:"xs",className:U.a.copyValueMenuIcon})," Copy value"]})})},de=function(e){var t=e.parameters,a=e.colorClassMap;return 1===new Set(t.map((function(e){return e.Value}))).size?Object(n.jsx)(ue,{parameter:t[0],colorClassMap:a}):Object(n.jsx)("td",{className:_()(U.a.valueCell,a.get(t[0].Value)),children:t.map((function(e){var t=e.Value,a=e.Prefix,r=a.slice(a.lastIndexOf("/")+1).replace("lservice","ls").replace("allapps","all");return Object(n.jsxs)("p",{children:[r,": ",be(12,null!==t&&void 0!==t?t:"")]},t)}))})},pe=(a(517),["dev1","dev2","dev3","dev4","dev5","audt","stgn/blue","stgn/green"]),be=function(e,t){return t.length>e?t.slice(0,e)+"...":t},me=[U.a.consistent0,U.a.consistent1,U.a.consistent2,U.a.consistent3,U.a.consistent4,U.a.consistent5,U.a.consistent6,U.a.consistent7,U.a.consistent8],he=function(e){var t=e.paramsForName,a=new Map(Object.entries(ee.a.countBy(t,"Value")).map((function(e,t){return[Object(f.a)(e,1)[0],me[t]]})));return Object(n.jsx)(n.Fragment,{children:pe.map((function(e){var r=t.filter((function(t){return t.Name.includes(e)})),s="".concat(e,"-value"),c=r.length<=0,i=1===r.length;return c?Object(n.jsx)(se,{},s):i?Object(n.jsx)(ue,{parameter:r[0],colorClassMap:a},s):Object(n.jsx)(de,{parameters:r,colorClassMap:a},s)}))})},fe=function(e){var t=e.params,a=Object(r.useState)(""),s=Object(f.a)(a,2),c=s[0],i=s[1],l=Object(r.useMemo)((function(){var e=new Map;return t.forEach((function(t){var a,n=t.Name.slice(t.Prefix.length),r=null!==(a=e.get(n))&&void 0!==a?a:[];e.set(n,[].concat(Object(Z.a)(r),[t]))})),Array.from(e.entries()).sort().map((function(e){var t=Object(f.a)(e,2);return{name:t[0],paramsForName:t[1]}}))}),[t]),o=Object(r.useMemo)((function(){return 0===c.trim().length?l.map((function(e){return{item:e,matches:[],refIndex:-1}})):new ae.a(l,{keys:["name"],includeMatches:!0,minMatchCharLength:2,includeScore:!0}).search(c).filter((function(e){var t=e.score;return(null!==t&&void 0!==t?t:0)<.5}))}),[l,c]);return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(d.f,{size:"0",children:Object(n.jsx)(d.a,{span:4,children:Object(n.jsx)(te.a,{size:"xs",placeholder:"Search by param name",onChange:function(e){return i(e.target.value)}})})}),Object(n.jsxs)("table",{className:_()("wt-table wt-table_wide wt-table_size_xs wt-offset-top-12",U.a.paramsTable),children:[Object(n.jsx)("thead",{className:"wt-text-3",children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{className:U.a.nameTh,children:"Name"}),pe.map((function(e){return Object(n.jsx)("th",{className:U.a.envTh,children:e},e)}))]})}),Object(n.jsx)("tbody",{className:"wt-text-3",children:o.map((function(e,t,a){for(var r,s=e.item,c=s.name,i=s.paramsForName,l=e.matches,o=null!==(r=null===l||void 0===l?void 0:l.flatMap((function(e){return e.indices.map((function(e){return c.slice(e[0],e[1]+1)}))})))&&void 0!==r?r:[],u=c.split("/"),j=t>0?a[t-1].item.name.split("/"):[],d=Object(Z.a)(u),p=[],b=0;b<u.length&&u[b]===j[b];b++)d.shift(),p.push(u[b]);return Object(n.jsxs)("tr",{children:[Object(n.jsxs)("td",{width:400,className:U.a.prefixTd,children:[Object(n.jsx)(re.a,{searchWords:o,textToHighlight:p.join("/"),className:U.a.hiddenPrefix}),Object(n.jsx)(re.a,{searchWords:o,textToHighlight:(p.length>0?"/":"")+d.join("/")})]}),Object(n.jsx)(he,{paramsForName:i})]},"".concat(c,"-row"))}))})]}),Object(n.jsx)(je,{})]})},ve=[{tomcat:"/jetprofile-dev1/",lservice:"/jetprofile/dev1/lservice",allapps:"/jetprofile/dev1/allapps"},{tomcat:"/jetprofile-dev2/",lservice:"/jetprofile/dev2/lservice",allapps:"/jetprofile/dev2/allapps"},{tomcat:"/jetprofile-dev3/",lservice:"/jetprofile/dev3/lservice",allapps:"/jetprofile/dev3/allapps"},{tomcat:"/jetprofile-dev4/",lservice:"/jetprofile/dev4/lservice",allapps:"/jetprofile/dev4/allapps"},{tomcat:"/jetprofile-dev5/",lservice:"/jetprofile/dev5/lservice",allapps:"/jetprofile/dev5/allapps"},{tomcat:"/jetprofile-audt/",lservice:"/jetprofile/audt/lservice",allapps:"/jetprofile/audt/allapps"},{tomcat:"/jetprofile-stgn/",lservice:"/jetprofile/stgn/blue/lservice",allapps:"/jetprofile/stgn/blue/allapps"},{tomcat:"/jetprofile-stgn/",lservice:"/jetprofile/stgn/green/lservice",allapps:"/jetprofile/stgn/green/allapps"}],xe=a(169),Oe=a.n(xe),ge=function(e,t,a,r){var s=Object(n.jsxs)(n.Fragment,{children:["prefix: '",e,"', total: ",Object(n.jsx)("strong",{children:a})]});if(0===r)return Object(n.jsxs)(n.Fragment,{children:["Loading, ",s," "]});var c=Math.ceil(100*a/r);return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("strong",{children:[c,"%"]}),"\xa0(",s,"\xa0of\xa0",Object(n.jsx)("strong",{children:r}),")"]})},_e=function(){var e=Object(v.a)(h.a.mark((function e(t,a,n,r,s,c){var i,l,o,u,j,d,p;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=new Oe.a.SSM({region:"eu-west-1",credentials:new xe.Credentials(t,a)}),l=[],o=ve.flatMap((function(e){var t=e.tomcat,a=e.allapps;return[t,e.lservice,a]})),u=new Set(o),j=h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p[d],e.next=3,new Promise((function(e){i.getParametersByPath({Path:t,Recursive:!0,WithDecryption:!0}).eachPage((function(a,c,i){return s(ge(t,0,l.length,n)),a&&r(a),(null===i||void 0===i?void 0:i())||((null===c||void 0===c?void 0:c.Parameters)&&l.push.apply(l,Object(Z.a)(null===c||void 0===c?void 0:c.Parameters.map((function(e){return e.Prefix=t,e}))))),null==c&&e(void 0),!0}))}));case 3:case"end":return e.stop()}}),e)})),d=0,p=Array.from(u);case 6:if(!(d<p.length)){e.next=11;break}return e.delegateYield(j(),"t0",8);case 8:d++,e.next=6;break;case 11:c(l);case 12:case"end":return e.stop()}}),e)})));return function(t,a,n,r,s,c){return e.apply(this,arguments)}}(),we=a(170),Ne=a.n(we),ye=function(e){var t=e.title;return t?Object(n.jsxs)(d.f,{justify:"around",alignItems:"center",direction:"column",size:"0",children:[Object(n.jsx)(d.a,{span:"inline",children:Object(n.jsx)("div",{className:Ne.a.logoContainer,children:Object(n.jsx)("img",{src:q,width:64,alt:"Panamera logo",className:Ne.a.logo})})}),Object(n.jsx)(d.a,{span:"inline",children:Object(n.jsx)("p",{className:"wt-text-2",children:t})})]}):null},Ce=function(){var e=R(),t=e.credentials,a=e.removeCredentials,s=null!==t&&void 0!==t?t:{accessKey:"",secretKey:""},c=s.accessKey,i=s.secretKey,l=Object(r.useState)(),u=Object(f.a)(l,2),j=u[0],d=u[1],p=Object(r.useState)([]),b=Object(f.a)(p,2),m=b[0],h=b[1],v=B("aws-params"),x=v.value,O=v.setValue,g=v.removeValue,_=null!==x&&void 0!==x?x:{fetchedAt:void 0,parameters:[]},w=_.fetchedAt,N=_.parameters,y=Object(r.useState)(!0),C=Object(f.a)(y,2),k=C[0],P=C[1],V=function(){h([]),_e(c,i,N.length,(function(e){return h((function(t){return[].concat(Object(Z.a)(t),[e])}))}),(function(e){return d(e)}),(function(e){d(void 0),O({fetchedAt:new Date,parameters:e})})).catch(console.error)};return Object(r.useEffect)((function(){void 0===j&&0===(null===N||void 0===N?void 0:N.length)&&""!==c&&k&&(V(),P(!1))}),[j,N,c,k,P,V]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:"wt-text-2",children:["Using key: ",Object(n.jsx)("strong",{children:T(c)})," | Fetched ",Object(n.jsx)("strong",{children:null===N||void 0===N?void 0:N.length})," parameters ",Object(n.jsx)("strong",{children:w?o()(w).fromNow():""})," |"," ",Object(n.jsx)(X.a,{size:"xs",mode:"nude",onClick:V,disabled:!!j,children:"Refresh"})," ","|"," ",Object(n.jsx)(X.a,{size:"xs",mode:"nude",onClick:function(){a(),g()},children:"Sign out"})]}),Object(n.jsx)("div",{className:"wt-offset-top-12"}),m.length>0&&Object(n.jsx)(S,{error:new Error("Got ".concat(m.length," unexpected error while refreshing params"))}),void 0===j&&0===(null===N||void 0===N?void 0:N.length)&&Object(n.jsxs)("p",{className:"wt-text-2",children:["Parameters table is empty, press ",Object(n.jsx)("strong",{children:"Refresh"})," above to fill it"]}),Object(n.jsx)(ye,{title:j}),!j&&N.length>0&&Object(n.jsx)(fe,{params:N})]})},ke=function(){return Object(n.jsx)(G,{children:Object(n.jsxs)(Y.d,{children:[Object(n.jsx)(Y.b,{path:"/credentials",children:Object(n.jsx)(A,{})}),Object(n.jsx)(H,{path:"/",exact:!0,children:Object(n.jsx)(Ce,{})})]})})},Se=a(79);o.a.extend(j.a),i.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(Se.a,{children:Object(n.jsx)(ke,{})})}),document.getElementById("root"))}},[[915,1,2]]]);
//# sourceMappingURL=main.c1bd3212.chunk.js.map